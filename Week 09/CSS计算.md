#### DOM = css/computing 》
##### 8. CSS计算 | 收集 CSS 规则
npm install css
1. 遇到style标签，我们把css 规则保存起来
2. 这里我们调用 css parser 来分析css规则
3. 这里我们必须要仔细研究此库分析css规则的格式

##### 9. CSS计算 | 添加调用
1. 当我们创建一个元素后，立即计算CSS
2. 理论上，当我们分析一个元素时，所有 css 规则已经收集完毕
3. 在真实浏览器中，可能遇到写在 body 的 style 标签，需要重新 CSS 计算的情况，这里我们忽略

##### 10. CSS计算 | 获取父元素序列
1. 在 computedCSS 函数中，我们必须知道元素的所有父元素才能判断元素与规则是否匹配
2. 我们从上一步骤的 stack，可以获取本元素所有的父元素
3. 因为我们首先获取的是“当前元素”，所以我们获取和计算父元素匹配的顺序是从内向外的

##### 11. CSS计算 | 选择器与元素的匹配
1. 选择器也要从当前元素向外排列
2. 复杂选择器拆成针对单个元素的选择器，用循环匹配父元素队列

##### 12. CSS计算 | 计算选择器与元素的匹配
1. 根据选择器的类型和元素属性，计算是否与当前元素匹配
2. 这里仅仅实现了三种基本选择器，实际的浏览器中要处理复合选择器

##### 13. CSS计算 | 生成 computed 属性
1. 一旦选择匹配，就应用选择器到元素上，形成 computedStyle
选择器不管三七二十一的往上覆盖，那么我若是多个选择器，那么如何处理？

##### 14. CSS计算 | specifity（特征、专一性，这里翻译为 优先级） 的计算逻辑
priority 优先级

通过进位制的比较，来比较样式选择器的优先级。
[0,    1,     0,     2]
inline id     class  tag

[0,2,0,1]

这两条，从左往右比较，第二位就能决定出来优先级。

1. CSS 规则根据 specificity 和后来优先规则覆盖
2. specificity 是一个四元组，越左边的权重越高
3. 一个 CSS 规则的 specificity 根据包含的简单选择器相加而成